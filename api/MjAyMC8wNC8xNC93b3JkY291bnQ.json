{"title":"Add readable time for theme inside","date":"2020-04-13T16:09:24.000Z","date_formatted":{"ll":"Apr 14, 2020","L":"04/14/2020","MM-DD":"04-14"},"author":"WardZhou","thumbnail":"https://cdn.wardzhou.art/img/book-1935973_640.jpg","link":"2020/04/14/wordcount","comments":true,"tags":["Hexo","前端","阅读时间"],"categories":["教程"],"updated":"2020-12-14T15:10:11.497Z","content":"<h2 id=\"preview\">Preview<a title=\"#preview\" href=\"#preview\"></a></h2>\n<ul>\n<li><strong>Normal style</strong><br>\n<img src=\"https://cdn.wardzhou.art/img/20200414013933.png\" alt=\"\" loading=\"lazy\"></li>\n<li><strong>With thumbnail</strong><br>\n<img src=\"https://cdn.wardzhou.art/img/20200414014049.png\" alt=\"\" loading=\"lazy\"></li>\n</ul>\n<h2 id=\"general-solution\">General Solution<a title=\"#general-solution\" href=\"#general-solution\"></a></h2>\n<blockquote>\n<p>update: Take images into account.</p>\n</blockquote>\n<ol>\n<li>Get the element which contains the paragraphs to be count.</li>\n<li>Use innerText.length to count.</li>\n<li>Get the parent container.</li>\n<li>Insert new elements to the end of the container.</li>\n</ol>\n<h2 id=\"jump-in!\">Jump in!<a title=\"#jump-in!\" href=\"#jump-in!\"></a></h2>\n<blockquote>\n<p>notes: the present guide is only for the latest version of <a href=\"https://github.com/ikeq/hexo-theme-inside/releases/tag/2.7.0-beta.0\" target=\"_blank\">inside 2.7.0 beta0</a>.</p>\n</blockquote>\n<ol>\n<li>create a new <code>js</code> file, and copy the following codes.</li>\n</ol>\n<blockquote>\n<p>Defult by 400 words or 12 images per min.<br>\nCustomize in line 4.</p>\n</blockquote>\n<figure class=\"highlight javascript\"><figcaption><span>wordcount.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> $container = $(<span class=\"string\">&quot;[class=&#x27;φgj φo&#x27;]&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> readTime = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&quot;article&quot;</span>).innerText.length;</span><br><span class=\"line\"><span class=\"keyword\">var</span> imgAmmount = $(<span class=\"string\">&quot;img&quot;</span>).length;</span><br><span class=\"line\"><span class=\"keyword\">var</span> readTime = <span class=\"built_in\">Math</span>.round(readTime / <span class=\"number\">400</span> + imgAmmount*<span class=\"number\">5</span>/<span class=\"number\">60</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> outcome ;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(readTime &gt; <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">    outcome = <span class=\"string\">&#x27;Readable Time &#x27;</span> + readTime + <span class=\"string\">&#x27;min&#x27;</span>;</span><br><span class=\"line\">    <span class=\"comment\">//or Chinese tooltip</span></span><br><span class=\"line\">    <span class=\"comment\">//outcome = &#x27;可阅读时间 &#x27; + readTime + &#x27;分钟&#x27;;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    outcome = <span class=\"string\">&#x27;Readable Time 1min&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> $add = $(<span class=\"string\">&#x27;&lt;div class=&quot;φgk&quot;&gt;&lt;i class=&quot;fa fa-clock-o&quot;&gt;&lt;/i&gt; &#x27;</span> + outcome + <span class=\"string\">&#x27;&lt;/div&gt;&#x27;</span>);</span><br><span class=\"line\">$container.append($add);</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>put this file to your source folder</li>\n</ol>\n<blockquote>\n<p>My demon uses the following path:<br>\n<code>\\source\\custom\\wordcount.js</code></p>\n</blockquote>\n<ol start=\"3\">\n<li>Edit the <code>_config.yml</code> in hexo root folder to skip render js file.</li>\n</ol>\n<figure class=\"highlight yml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">skip_render:</span> </span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&#x27;custom/**&#x27;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&#x27;**.js&#x27;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>Edit the <code>_config.yml</code> in theme folder to introduce.</li>\n</ol>\n<blockquote>\n<p><code>\\themes\\inside\\_config.yml</code></p>\n</blockquote>\n<figure class=\"highlight yml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">position:</span> <span class=\"string\">post</span></span><br><span class=\"line\">    <span class=\"attr\">template:</span> <span class=\"string\">|</span>  </span><br><span class=\"line\">    <span class=\"string\">&lt;link</span> <span class=\"string\">href=&quot;https://cdn.bootcss.com/font-awesome/5.13.0/css/all.min.css&quot;</span> <span class=\"string\">rel=&quot;stylesheet&quot;&gt;</span></span><br><span class=\"line\">    <span class=\"string\">&lt;script</span> <span class=\"string\">type=&quot;text/javascript&quot;</span> <span class=\"string\">src=&quot;custom/wordcount.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>notes: If you already introduced font-awesome,following code is removeable.</p>\n<p><code>&lt;link href=&quot;https://cdn.bootcss.com/font-awesome/5.13.0/css/all.min.css&quot; rel=&quot;stylesheet&quot;&gt;</code></p>\n</blockquote>\n<ol start=\"5\">\n<li>Save all changes and execute following commands in hexo root folder.</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo g</span><br><span class=\"line\">hexo s</span><br></pre></td></tr></table></figure>\n<p>Preview changes in your browser. If work out well then execute:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo d</span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>Enjoy! XD</li>\n</ol>\n","prev":{"title":"晚春 Deep Spring","link":"2020/04/14/deepSpring"},"next":{"title":"山桃 Wild Peach","link":"2020/04/10/山桃"},"plink":"http://wardzhou.art/2020/04/14/wordcount/","toc":[{"id":"preview","title":"Preview","index":"1"},{"id":"general-solution","title":"General Solution","index":"2"},{"id":"jump-in!","title":"Jump in!","index":"3"}],"reward":true,"copyright":{"author":"WardZhou","license":"Attribution-NonCommercial-NoDerivatives 4.0 International(<a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","updated":"December 14, 2020"},"reading_time":"343 words in 2 min"}
{"title":"How to acquire Tweets elegantly using R","date":"2020-06-06T16:16:04.000Z","date_formatted":{"ll":"Jun 7, 2020","L":"06/07/2020","MM-DD":"06-07"},"author":"WardZhou","thumbnail":"https://cdn.wardzhou.art/img/20200607014150.png","link":"2020/06/07/Rtweet","comments":true,"tags":["R","Tweet","Twitter"],"categories":["ÊïôÁ®ã"],"updated":"2020-06-10T15:48:44.303Z","content":"<p>Twitter as one of the most important social platform could be of value to academical research and development. This article will guide you to acquire Tweets by R and Rtweet based on official API.</p>\n<h1 id=\"preparation\">Preparation<a title=\"#preparation\" href=\"#preparation\"></a></h1>\n<h2 id=\"step-1\">Step 1<a title=\"#step-1\" href=\"#step-1\"></a></h2>\n<p>Make sure you have A DEVELOPER ACCOUNT in hand. If not apply one please.<a href=\"https://developer.twitter.com/\" target=\"_blank\">üîóHere‚Äôs the link</a></p>\n<blockquote>\n<p>NOTE: Twitter is getting strict about application of new developer account, once your application is refused, your account will be baned(only for developer account).</p>\n<p>Use Gmail to sign up an account and choose <code>Explore API</code>  when apply could be of great help. Also ,<strong>do not</strong> select options below like analysis tweets.</p>\n</blockquote>\n<p>Then create a new app if you haven‚Äôt have one.</p>\n<blockquote>\n<p><code>Callback URL</code> must be <code>http://127.0.0.1:1410</code></p>\n</blockquote>\n<h2 id=\"step-2\">Step 2<a title=\"#step-2\" href=\"#step-2\"></a></h2>\n<p>Go to <code>Dev Environments</code> of Twitter Developer, apply the first two environments.</p>\n<p>Choose the app and type a lable. Please do note down the <strong>lable</strong>.<br>\n<img src=\"https://cdn.wardzhou.art/img/20200607003913.png\" alt=\"\"></p>\n<h2 id=\"step-3\">Step 3<a title=\"#step-3\" href=\"#step-3\"></a></h2>\n<p>Go to the detail page of your app then switch to <code>**Keys and tokens**</code><br>\n<img src=\"https://cdn.wardzhou.art/img/20200607004548.png\" alt=\"\"><br>\nKeep down the four tokens especially the <code>Access token &amp; access token secret</code>.</p>\n<h2 id=\"step-4\">Step 4<a title=\"#step-4\" href=\"#step-4\"></a></h2>\n<p>Open your R or RStudio, install <code>Rtweet</code>.</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">install.packages(<span class=\"string\">'rtweet'</span>) <span class=\"comment\">#Install Rtweet package</span></span><br><span class=\"line\"><span class=\"keyword\">library</span>(rtweet)            <span class=\"comment\">#Introducing package</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"get-to-work!\">Get to work!<a title=\"#get-to-work!\" href=\"#get-to-work!\"></a></h1>\n<h2 id=\"step-5\">Step 5<a title=\"#step-5\" href=\"#step-5\"></a></h2>\n<p>Authorize your R with tokens in Step 3.</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create_token(</span><br><span class=\"line\">  app = <span class=\"string\">\"mytwitterapp\"</span>,</span><br><span class=\"line\">  consumer_key = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  consumer_secret = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  access_token = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  access_secret = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  set_renv = <span class=\"literal\">TRUE</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>More instruction can be found in <a href=\"https://rtweet.info/reference/create_token.html\" target=\"_blank\">doc</a></p>\n<h2 id=\"step-6\">Step 6<a title=\"#step-6\" href=\"#step-6\"></a></h2>\n<p><strong>Now enjoy your ride!</strong></p>\n<h3 id=\"timeline\">Timeline<a title=\"#timeline\" href=\"#timeline\"></a></h3>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">get_my_timeline()</span><br><span class=\"line\">get_timeline()</span><br><span class=\"line\">get_timelines()</span><br></pre></td></tr></table></figure>\n<p>The three method can be used to acquire timeline of specific account.<br>\nHere‚Äôs example</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">user &lt;- c(<span class=\"string\">'microsoft'</span>)</span><br><span class=\"line\">timeline &lt;- get_timeline(</span><br><span class=\"line\">\t\t\t\tuser,</span><br><span class=\"line\">  \t\t\t\tn = <span class=\"number\">100</span>,</span><br><span class=\"line\">  \t\t\t\tmax_id = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  \t\t\t\thome = <span class=\"literal\">FALSE</span>,</span><br><span class=\"line\">  \t\t\t\tparse = <span class=\"literal\">TRUE</span>,</span><br><span class=\"line\">  \t\t\t\tcheck = <span class=\"literal\">TRUE</span>,</span><br><span class=\"line\">  \t\t\t\ttoken = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">\t\t\t)</span><br><span class=\"line\">View(timeline)</span><br></pre></td></tr></table></figure>\n<h3 id=\"search\">Search<a title=\"#search\" href=\"#search\"></a></h3>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">search_tweets()</span><br><span class=\"line\">search_tweets2()</span><br><span class=\"line\">search_fullarchive()</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>search_tweets()</code> Returns Twitter statuses matching a user provided search query.</li>\n<li>ONLY RETURNS DATA FROM THE PAST 6-9 DAYS.</li>\n<li><code>3200</code>Tweets Max in this method everytime.</li>\n<li>To return more than 18,000 statuses in a single call, set ‚Äúretryonratelimit‚Äù to TRUE.</li>\n</ul>\n<p><code>search_tweets2()</code> Passes all arguments to search_tweets. Returns data from one OR MORE search queries.</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">q &lt;- <span class=\"string\">\"Microsoft or Xbox\"</span></span><br><span class=\"line\">result &lt;- search_tweets(</span><br><span class=\"line\">  \t\t\tq,</span><br><span class=\"line\">  \t\t\tn = <span class=\"number\">237</span>,</span><br><span class=\"line\">  \t\t\ttype = <span class=\"string\">\"recent\"</span>,</span><br><span class=\"line\">  \t\t\tinclude_rts = <span class=\"literal\">TRUE</span>,</span><br><span class=\"line\">  \t\t\tgeocode = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  \t\t\tmax_id = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  \t\t\tparse = <span class=\"literal\">TRUE</span>,</span><br><span class=\"line\">  \t\t\ttoken = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  \t\t\tretryonratelimit = <span class=\"literal\">FALSE</span>,</span><br><span class=\"line\">  \t\t\tverbose = <span class=\"literal\">TRUE</span>,</span><br><span class=\"line\">  \t\t\t)</span><br><span class=\"line\">View(result)</span><br></pre></td></tr></table></figure>\n<p><code>search_fullarchive()</code> can access all history tweets. Free subscription includs <code>5K Tweets</code> per month.</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">q &lt;- <span class=\"string\">\"from:microsoft\"</span> <span class=\"comment\">#use from:username to query tweets from specific user</span></span><br><span class=\"line\">result &lt;- search_fullarchive(</span><br><span class=\"line\">  \t\tq,</span><br><span class=\"line\">  \t\tn = <span class=\"number\">100</span>,</span><br><span class=\"line\">  \t\tfromDate = <span class=\"number\">201903010000</span>,</span><br><span class=\"line\">  \t\ttoDate = <span class=\"number\">201903020000</span>,</span><br><span class=\"line\">  \t\tenv_name = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  \t\tsafedir = <span class=\"literal\">NULL</span>,</span><br><span class=\"line\"> \t\tparse = <span class=\"literal\">TRUE</span>,</span><br><span class=\"line\">  \t\ttoken = <span class=\"literal\">NULL</span></span><br><span class=\"line\">\t\t)</span><br><span class=\"line\">View(result)</span><br></pre></td></tr></table></figure>\n<h1 id=\"data-structure\">Data Structure<a title=\"#data-structure\" href=\"#data-structure\"></a></h1>\n<p>View Data Structure <a href=\"https://developer.twitter.com/en/docs/tweets/data-dictionary/overview/tweet-object\" target=\"_blank\">here</a> on offcial Doc.<br>\n<img src=\"https://cdn.wardzhou.art/img/20200607012820.png\" alt=\"\"></p>\n<h1 id=\"export-data\">Export Data<a title=\"#export-data\" href=\"#export-data\"></a></h1>\n<p>Rtweet offers a method `` helping you export data as CSV fils</p>\n<figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">write_as_csv(YourData,</span><br><span class=\"line\">             <span class=\"string\">'/path/filename.csv'</span>, </span><br><span class=\"line\">             prepend_ids = <span class=\"literal\">TRUE</span>, </span><br><span class=\"line\">             na = <span class=\"string\">\"\"</span>, </span><br><span class=\"line\">             fileEncoding = <span class=\"string\">\"UTF-8\"</span>)</span><br></pre></td></tr></table></figure>\n<h1 id=\"get-more\">Get More<a title=\"#get-more\" href=\"#get-more\"></a></h1>\n<h2 id=\"doc-link\">Doc link<a title=\"#doc-link\" href=\"#doc-link\"></a></h2>\n<ul>\n<li>Doc is always a friend even though not friendly sometimes XD.</li>\n<li>View all method of Rtweet <a href=\"https://rtweet.info/reference/index.html\" target=\"_blank\">here</a>.</li>\n<li>And offcial API Doc <a href=\"https://developer.twitter.com/en/docs\" target=\"_blank\">here</a>.</li>\n</ul>\n<h2 id=\"final-note\">Final Note<a title=\"#final-note\" href=\"#final-note\"></a></h2>\n<ul>\n<li>Please do not try to violate the policy of Twitter or local law.</li>\n<li>Privacy is important to us all, so take care of the data you get and put them into good use.</li>\n</ul>\n<p>Hope you enjoy this ride. Just leave a comment If you run across any problem or notice any mistake in this article.</p>\n","prev":{"title":"Piano Programme for ACC","link":"2020/06/14/PianoProgramme"},"next":{"title":"Âêå‰∏Ä Identity","link":"2020/06/03/Identity"},"plink":"http://wardzhou.art/2020/06/07/Rtweet/","toc":[{"id":"preparation","title":"Preparation","index":"1","children":[{"id":"step-1","title":"Step 1","index":"1.1"},{"id":"step-2","title":"Step 2","index":"1.2"},{"id":"step-3","title":"Step 3","index":"1.3"},{"id":"step-4","title":"Step 4","index":"1.4"}]},{"id":"get-to-work!","title":"Get to work!","index":"2","children":[{"id":"step-5","title":"Step 5","index":"2.1"},{"id":"step-6","title":"Step 6","index":"2.2","children":[{"id":"timeline","title":"Timeline","index":"2.2.1"},{"id":"search","title":"Search","index":"2.2.2"}]}]},{"id":"data-structure","title":"Data Structure","index":"3"},{"id":"export-data","title":"Export Data","index":"4"},{"id":"get-more","title":"Get More","index":"5","children":[{"id":"doc-link","title":"Doc link","index":"5.1"},{"id":"final-note","title":"Final Note","index":"5.2"}]}],"reward":true,"copyright":{"author":"WardZhou","license":"Attribution-NonCommercial-NoDerivatives 4.0 International(<a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","updated":"June 10, 2020"}}